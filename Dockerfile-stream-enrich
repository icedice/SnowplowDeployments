FROM scala-alpine
LABEL maintainer="Asger Bachmann <asger.g.bachmann@jp.dk>"

ENV VERSION="0.15.0"

COPY ./snowplow/3-enrich/stream-enrich/kinesis/target/scala-2.11/snowplow-stream-enrich-kinesis-${VERSION}.jar /app/snowplow-stream-enrich-kinesis-${VERSION}.jar
COPY ./stream-enrich/configuration/config /app/configuration/config
COPY ./stream-enrich/configuration/resolver.json /app/configuration/resolver.json
COPY ./stream-enrich/configuration/enrichments/ /app/configuration/enrichments/

CMD java -jar -Dorg.slf4j.simpleLogger.defaultLogLevel=info /app/snowplow-stream-enrich-kinesis-${VERSION}.jar --config /app/configuration/config --resolver file:/app/configuration/resolver.json --enrichments file:/app/configuration/enrichments
